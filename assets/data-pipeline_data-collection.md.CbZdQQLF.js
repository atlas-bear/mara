import{_ as i,c as t,o as a,ag as o}from"./chunks/framework.BONmpqY0.js";const u=JSON.parse('{"title":"Data Collection System","description":"","frontmatter":{},"headers":[],"relativePath":"data-pipeline/data-collection.md","filePath":"data-pipeline/data-collection.md"}'),n={name:"data-pipeline/data-collection.md"};function l(s,e,c,r,d,h){return a(),t("div",null,e[0]||(e[0]=[o('<h1 id="data-collection-system" tabindex="-1">Data Collection System <a class="header-anchor" href="#data-collection-system" aria-label="Permalink to &quot;Data Collection System&quot;">​</a></h1><p>The MARA data collection system automatically gathers maritime incident information from multiple authoritative sources and standardizes it for further processing. Each source has a dedicated collection function tailored to that source&#39;s specific data format and access methods.</p><h2 id="collection-functions" tabindex="-1">Collection Functions <a class="header-anchor" href="#collection-functions" aria-label="Permalink to &quot;Collection Functions&quot;">​</a></h2><p>MARA implements the following collection functions, each designed to interface with a specific maritime reporting organization:</p><table tabindex="0"><thead><tr><th>Function</th><th>Source</th><th>Data Access</th><th>Update Frequency</th></tr></thead><tbody><tr><td><code>collect-recaap.js</code></td><td>ReCAAP</td><td>API</td><td>Twice hourly</td></tr><tr><td><code>collect-ukmto.js</code></td><td>UKMTO</td><td>Website scraping</td><td>Twice hourly</td></tr><tr><td><code>collect-mdat.js</code></td><td>MDAT-GoG</td><td>API</td><td>Twice hourly</td></tr><tr><td><code>collect-icc.js</code></td><td>ICC-IMB</td><td>API</td><td>Twice hourly</td></tr><tr><td><code>collect-cwd.js</code></td><td>CWD</td><td>API</td><td>Twice hourly</td></tr></tbody></table><h2 id="common-collection-pattern" tabindex="-1">Common Collection Pattern <a class="header-anchor" href="#common-collection-pattern" aria-label="Permalink to &quot;Common Collection Pattern&quot;">​</a></h2><p>While each source has unique requirements, all collection functions follow a common pattern:</p><ol><li><strong>Authentication</strong>: Establish secure connection to the source</li><li><strong>Data Retrieval</strong>: Fetch recent incident data</li><li><strong>Deduplication</strong>: Check if incidents already exist in the <code>raw_data</code> table</li><li><strong>Standardization</strong>: Convert source-specific fields to a common format</li><li><strong>Storage</strong>: Save new incidents to the <code>raw_data</code> table in Airtable</li><li><strong>Logging</strong>: Record collection activity for monitoring</li></ol><h2 id="source-specific-implementations" tabindex="-1">Source-Specific Implementations <a class="header-anchor" href="#source-specific-implementations" aria-label="Permalink to &quot;Source-Specific Implementations&quot;">​</a></h2><h3 id="recaap-collection-collect-recaap-js" tabindex="-1">ReCAAP Collection (<code>collect-recaap.js</code>) <a class="header-anchor" href="#recaap-collection-collect-recaap-js" aria-label="Permalink to &quot;ReCAAP Collection (`collect-recaap.js`)&quot;">​</a></h3><p>The Regional Cooperation Agreement on Combating Piracy and Armed Robbery against Ships in Asia (ReCAAP) provides detailed incident reports with vessel information.</p><p><strong>Data Access</strong>:</p><ul><li>Uses the ReCAAP API endpoint</li><li>Authenticates using API key</li><li>Retrieves incidents in JSON format</li></ul><p><strong>Key Features</strong>:</p><ul><li>Comprehensive vessel data (name, type, flag, IMO)</li><li>Detailed incident descriptions</li><li>Standardized categorization system (CAT1-CAT4)</li><li>Geographic focus on Asian waters</li></ul><h3 id="ukmto-collection-collect-ukmto-js" tabindex="-1">UKMTO Collection (<code>collect-ukmto.js</code>) <a class="header-anchor" href="#ukmto-collection-collect-ukmto-js" aria-label="Permalink to &quot;UKMTO Collection (`collect-ukmto.js`)&quot;">​</a></h3><p>UK Maritime Trade Operations (UKMTO) provides maritime security information focused on the Arabian Gulf, Gulf of Aden, and Western Indian Ocean.</p><p><strong>Data Access</strong>:</p><ul><li>Accesses UKMTO&#39;s public data feed</li><li>Parses structured data</li><li>Filters for relevant maritime security incidents</li></ul><p><strong>Key Features</strong>:</p><ul><li>Focus on Red Sea, Gulf of Aden, and Indian Ocean</li><li>Strong coverage of security threats and warnings</li><li>Timely naval forces reporting</li><li>Minimal vessel details</li></ul><h3 id="mdat-gog-collection-collect-mdat-js" tabindex="-1">MDAT-GoG Collection (<code>collect-mdat.js</code>) <a class="header-anchor" href="#mdat-gog-collection-collect-mdat-js" aria-label="Permalink to &quot;MDAT-GoG Collection (`collect-mdat.js`)&quot;">​</a></h3><p>Maritime Domain Awareness for Trade - Gulf of Guinea (MDAT-GoG) specializes in West African maritime security incidents.</p><p><strong>Data Access</strong>:</p><ul><li>Uses MDAT-GoG&#39;s REST API</li><li>Retrieves incident details in structured format</li><li>Focuses on West Africa region</li></ul><p><strong>Key Features</strong>:</p><ul><li>Specialized coverage of Gulf of Guinea incidents</li><li>Detailed attack methodologies</li><li>Strong naval response information</li><li>Limited vessel details</li></ul><h3 id="icc-imb-collection-collect-icc-js" tabindex="-1">ICC-IMB Collection (<code>collect-icc.js</code>) <a class="header-anchor" href="#icc-imb-collection-collect-icc-js" aria-label="Permalink to &quot;ICC-IMB Collection (`collect-icc.js`)&quot;">​</a></h3><p>International Chamber of Commerce - International Maritime Bureau (ICC-IMB) provides global piracy and armed robbery reporting.</p><p><strong>Data Access</strong>:</p><ul><li>Accesses ICC&#39;s piracy reporting center data</li><li>Extracts incident data from structured feeds</li><li>Global incident coverage</li></ul><p><strong>Key Features</strong>:</p><ul><li>Worldwide incident coverage</li><li>Focus on commercial shipping impacts</li><li>Standardized incident categorization</li><li>Variable level of detail in incident descriptions</li></ul><h3 id="cwd-collection-collect-cwd-js" tabindex="-1">CWD Collection (<code>collect-cwd.js</code>) <a class="header-anchor" href="#cwd-collection-collect-cwd-js" aria-label="Permalink to &quot;CWD Collection (`collect-cwd.js`)&quot;">​</a></h3><p>Commercial Wisdom Database (CWD) provides supplementary incident data from commercial sources.</p><p><strong>Data Access</strong>:</p><ul><li>Uses proprietary API access</li><li>Structured data retrieval</li><li>Requires special authentication</li></ul><p><strong>Key Features</strong>:</p><ul><li>Commercially sourced intelligence</li><li>Detailed impact on shipping operations</li><li>Economic context for incidents</li><li>Additional analytical metadata</li></ul><h2 id="data-standardization" tabindex="-1">Data Standardization <a class="header-anchor" href="#data-standardization" aria-label="Permalink to &quot;Data Standardization&quot;">​</a></h2><p>Each collection function standardizes the source data into a common format with these key fields:</p><p><strong>Required Fields</strong>:</p><ul><li><code>title</code>: Brief incident description</li><li><code>description</code>: Detailed incident narrative</li><li><code>date</code>: ISO-8601 formatted incident timestamp</li><li><code>reference</code>: Unique source reference ID</li><li><code>source</code>: Name of the reporting organization</li><li><code>original_source</code>: Original reporter (if different from source)</li></ul><p><strong>Location Information</strong>:</p><ul><li><code>latitude</code>: Decimal degrees</li><li><code>longitude</code>: Decimal degrees</li><li><code>region</code>: Standardized maritime region</li><li><code>location</code>: Textual description of location</li></ul><p><strong>Incident Details</strong>:</p><ul><li><code>incident_type_name</code>: Categorization of incident type</li><li><code>incident_type_level</code>: Severity or threat level</li></ul><p><strong>Vessel Information</strong> (when available):</p><ul><li><code>vessel_name</code>: Ship name</li><li><code>vessel_type</code>: Vessel category</li><li><code>vessel_flag</code>: Flag state</li><li><code>vessel_imo</code>: IMO identification number</li><li><code>vessel_status</code>: Operational status during incident</li></ul><p><strong>Metadata</strong>:</p><ul><li><code>created_at</code>: Collection timestamp</li><li><code>modified_at</code>: Last update timestamp</li><li><code>raw_json</code>: Original source data preserved as JSON</li></ul><h2 id="error-handling-and-resilience" tabindex="-1">Error Handling and Resilience <a class="header-anchor" href="#error-handling-and-resilience" aria-label="Permalink to &quot;Error Handling and Resilience&quot;">​</a></h2><p>The collection functions implement robust error handling to ensure reliability:</p><ol><li><strong>Connection Failures</strong>: Graceful handling of API timeouts or unavailability</li><li><strong>Rate Limiting</strong>: Respects source API rate limits with exponential backoff</li><li><strong>Partial Data</strong>: Processes available data even if some fields are missing</li><li><strong>Schema Changes</strong>: Adapts to minor changes in source data schema</li><li><strong>Logging</strong>: Detailed error logging for troubleshooting</li></ol><h2 id="monitoring-and-maintenance" tabindex="-1">Monitoring and Maintenance <a class="header-anchor" href="#monitoring-and-maintenance" aria-label="Permalink to &quot;Monitoring and Maintenance&quot;">​</a></h2><p>Collection activity is monitored through:</p><ol><li><strong>Function Logs</strong>: Detailed execution logs in Netlify</li><li><strong>Activity Tracking</strong>: Collection runs recorded in the <code>monitor_runs</code> table</li><li><strong>Error Alerting</strong>: Critical failures trigger notifications</li><li><strong>Health Checks</strong>: Regular validation of source connectivity</li></ol><h2 id="extending-for-new-sources" tabindex="-1">Extending for New Sources <a class="header-anchor" href="#extending-for-new-sources" aria-label="Permalink to &quot;Extending for New Sources&quot;">​</a></h2><p>To add a new maritime incident source:</p><ol><li>Create a new collection function using the existing functions as templates</li><li>Implement source-specific authentication and data extraction</li><li>Map source fields to the standard MARA data schema</li><li>Add deduplication logic to prevent duplicate entries</li><li>Schedule the new function in <code>netlify.toml</code></li><li>Update monitoring to include the new source</li></ol><h2 id="scheduled-operation" tabindex="-1">Scheduled Operation <a class="header-anchor" href="#scheduled-operation" aria-label="Permalink to &quot;Scheduled Operation&quot;">​</a></h2><p>Collection functions are scheduled in a staggered pattern to prevent resource contention:</p><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">functions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;collect-recaap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">schedule = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0,30 * * * *&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # On the hour and half-hour</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">functions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;collect-ukmto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">schedule = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;5,35 * * * *&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 5 and 35 minutes past the hour</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">functions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;collect-mdat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">schedule = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;15,45 * * * *&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 15 and 45 minutes past the hour</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">functions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;collect-icc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">schedule = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;20,50 * * * *&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 20 and 50 minutes past the hour</span></span></code></pre></div><p>This ensures regular data collection while distributing the processing load.</p>',64)]))}const g=i(n,[["render",l]]);export{u as __pageData,g as default};
