import{_ as s,c as t,o as e,ag as a}from"./chunks/framework.BONmpqY0.js";const E=JSON.parse('{"title":"Flash Report Testing Guide","description":"","frontmatter":{},"headers":[],"relativePath":"flash-report/testing-guide.md","filePath":"flash-report/testing-guide.md"}'),n={name:"flash-report/testing-guide.md"};function l(h,i,o,p,r,k){return e(),t("div",null,i[0]||(i[0]=[a(`<h1 id="flash-report-testing-guide" tabindex="-1">Flash Report Testing Guide <a class="header-anchor" href="#flash-report-testing-guide" aria-label="Permalink to &quot;Flash Report Testing Guide&quot;">​</a></h1><p>This guide explains how to test the Flash Report functionality in different environments.</p><h2 id="testing-using-the-flash-report-ui" tabindex="-1">Testing Using the Flash Report UI <a class="header-anchor" href="#testing-using-the-flash-report-ui" aria-label="Permalink to &quot;Testing Using the Flash Report UI&quot;">​</a></h2><p>The simplest way to test the Flash Report system is to use the Flash Report user interface:</p><ol><li>Navigate to the Flash Report page for any incident (e.g., <code>/flash/2024-2662</code>)</li><li>Add recipient email addresses</li><li>Click &quot;Send Flash Report&quot;</li></ol><p>This will validate that the entire Flash Report pipeline is working properly from UI to email delivery.</p><h2 id="using-the-demo-mode" tabindex="-1">Using the Demo Mode <a class="header-anchor" href="#using-the-demo-mode" aria-label="Permalink to &quot;Using the Demo Mode&quot;">​</a></h2><p>The Flash Report system includes a client-side demo mode that allows testing without accessing real incident data:</p><ol><li>Enable demo mode in your application</li><li>Select recipients for the test flash report</li><li>Click &quot;Send Flash Report&quot; to trigger a test email with sample incident data</li></ol><p>The system will automatically use the demo incident (ID: 2024-2662) when in demo mode.</p><h2 id="testing-in-development-environment" tabindex="-1">Testing in Development Environment <a class="header-anchor" href="#testing-in-development-environment" aria-label="Permalink to &quot;Testing in Development Environment&quot;">​</a></h2><p>When testing in a development environment without SendGrid API keys:</p><ol><li>The system will detect missing API keys and operate in a &quot;test mode&quot;</li><li>Instead of sending actual emails, it will return a success response with the email content that would have been sent</li><li>You can examine this response to verify the email content and recipient list</li></ol><p>Example development mode response:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TESTING MODE: Email would be sent (no SendGrid API key provided)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;incident&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-2662&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Robbery&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-10-17T18:08:00.000Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;location&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Singapore Strait&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;coordinates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;latitude&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.13</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;longitude&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">103.5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vesselName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ASPASIA LUCK&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vesselType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bulk Carrier&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vesselFlag&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Liberia&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vesselIMO&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;9223485&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Underway&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;destination&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PEBGB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;crewStatus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;All Safe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Test incident description for flash report from serverless function.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;responseActions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Action 1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Action 2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;authorities_notified&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Local Maritime Authority&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;items_stolen&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Ship supplies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;This is a sample analysis for testing the flash report email functionality.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;recommendations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Use caution when transiting this area.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;mapImageUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://placehold.co/600x400?text=Map+Location&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;recipients&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mapImageUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://placehold.co/600x400?text=Map+Location&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="testing-with-real-incidents" tabindex="-1">Testing with Real Incidents <a class="header-anchor" href="#testing-with-real-incidents" aria-label="Permalink to &quot;Testing with Real Incidents&quot;">​</a></h2><p>To test with real incident data:</p><ol><li>Get a valid incident ID from your Airtable instance</li><li>Navigate to the Flash Report page for that incident (e.g., <code>/flash/2024-1234</code>)</li><li>Add recipient email addresses and send the report</li></ol><h2 id="email-appearance-testing" tabindex="-1">Email Appearance Testing <a class="header-anchor" href="#email-appearance-testing" aria-label="Permalink to &quot;Email Appearance Testing&quot;">​</a></h2><p>To test the visual appearance of flash report emails across different email clients:</p><ol><li>Use the test function to send test reports to email testing services like Litmus or Email on Acid</li><li>Test with both the default branding and custom branding options</li><li>Verify that maps and images render correctly</li><li>Check responsive design on mobile devices</li></ol><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><p>If you encounter issues when testing the Flash Report functionality:</p><ol><li><strong>Missing incident data</strong>: Verify that the incident ID exists in Airtable or use the demo incident ID (<code>2024-2662</code>)</li><li><strong>Email not received</strong>: Check spam folders and verify SendGrid API key configuration</li><li><strong>Missing maps</strong>: Ensure the Mapbox token is correctly configured</li><li><strong>Branding issues</strong>: Verify the branding configuration and environment variables</li><li><strong>Missing vessel data</strong>: Check the Netlify function logs for vessel data extraction: <ul><li>Look for &quot;vessel relationship data&quot; or &quot;vessel lookup&quot; log messages</li><li>Verify that vessel data exists in Airtable and is correctly linked to incidents</li><li>Check IMO numbers match between incident and vessel tables</li></ul></li></ol><p>For development environment issues, check the function logs in the Netlify dashboard:</p><ol><li>Go to your site&#39;s dashboard on Netlify</li><li>Navigate to &quot;Functions&quot; in the left sidebar</li><li>Find the &quot;send-flash-report&quot; function and click on it</li><li>View recent invocations to see detailed logs</li><li>Look for key debug messages like: <ul><li>&quot;VESSEL DATA DEBUG&quot;</li><li>&quot;DEBUG - VESSEL DATA BEING SENT TO EMAIL&quot;</li><li>&quot;Found IMO&quot; or &quot;Found vessel name&quot;</li><li>&quot;Successfully fetched vessel&quot;</li><li>&quot;Vessel data source: [source]&quot;</li></ul></li></ol><h2 id="testing-links-and-branding" tabindex="-1">Testing Links and Branding <a class="header-anchor" href="#testing-links-and-branding" aria-label="Permalink to &quot;Testing Links and Branding&quot;">​</a></h2><p>The Flash Report system now provides:</p><ol><li><strong>Consistent email branding</strong>: All emails use MARA branding for a consistent experience</li><li><strong>Domain-based link branding</strong>: When recipients click the &quot;View Online&quot; link, they see: <ul><li>Client-branded version if their email domain matches a client domain</li><li>Default MARA branding otherwise</li></ul></li><li><strong>Extended link validity</strong>: Links now remain valid for 1 year instead of 7 days</li></ol><p>To test these features:</p><ol><li>Send a test report to both client domain emails (e.g., <code>user@clientdomain.com</code>) and non-client emails</li><li>Verify all emails have consistent MARA branding</li><li>Click the &quot;View Online&quot; links and verify: <ul><li>Client domain recipients see client-branded page</li><li>Non-client domain recipients see MARA-branded page</li></ul></li><li>Test the links again after several weeks to confirm extended validity</li></ol>`,31)]))}const u=s(n,[["render",l]]);export{E as __pageData,u as default};
