<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Deduplication System Troubleshooting Guide | MARA Documentation</title>
    <meta name="description" content="Documentation for the Maritime Risk Analysis system">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/mara/assets/style.B9amjzLO.css" as="style">
    <link rel="preload stylesheet" href="/mara/vp-icons.css" as="style">
    
    <script type="module" src="/mara/assets/app.DyBrfPQ7.js"></script>
    <link rel="preload" href="/mara/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/mara/assets/chunks/theme.JX4UXoWB.js">
    <link rel="modulepreload" href="/mara/assets/chunks/framework.BONmpqY0.js">
    <link rel="modulepreload" href="/mara/assets/deduplication_troubleshooting.md.PtRIcf3o.lean.js">
    <link rel="icon" href="https://drive.google.com/uc?id=1OB5Lwgpp03DB9vs50T_kkKzL5VV_y5Eo" type="image/png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/mara/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="https://drive.google.com/uc?id=1OB5Lwgpp03DB9vs50T_kkKzL5VV_y5Eo" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>MARA Documentation</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mara/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mara/guide/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mara/components/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Components</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mara/data-pipeline/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Data Pipeline</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mara/deduplication/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Deduplication</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mara/ai-integration/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>AI Integration</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mara/flash-report/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Flash Reports</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mara/weekly-report/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Weekly Reports</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mara/api/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>API</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/atlas-bear/mara" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/atlas-bear/mara" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 has-active" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Cross-Source Deduplication</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/mara/deduplication/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/mara/deduplication/implementation.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Implementation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/mara/deduplication/troubleshooting.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Troubleshooting</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _mara_deduplication_troubleshooting" data-v-e6f2a212><div><h1 id="deduplication-system-troubleshooting-guide" tabindex="-1">Deduplication System Troubleshooting Guide <a class="header-anchor" href="#deduplication-system-troubleshooting-guide" aria-label="Permalink to &quot;Deduplication System Troubleshooting Guide&quot;">​</a></h1><p>This guide provides information for diagnosing and resolving issues with the cross-source deduplication system.</p><h2 id="common-issues-and-solutions" tabindex="-1">Common Issues and Solutions <a class="header-anchor" href="#common-issues-and-solutions" aria-label="Permalink to &quot;Common Issues and Solutions&quot;">​</a></h2><h3 id="no-matches-being-found" tabindex="-1">No Matches Being Found <a class="header-anchor" href="#no-matches-being-found" aria-label="Permalink to &quot;No Matches Being Found&quot;">​</a></h3><p>If the deduplication system isn&#39;t finding matches that you expect it to identify:</p><ol><li><strong>Check the logs</strong>: Look for <code>&quot;Found X potential matches&quot;</code> with <code>highConfidence</code> and <code>mediumConfidence</code> counts</li><li><strong>Review similarity scores</strong>: Examine the detailed component scores to see where potential matches are falling short</li><li><strong>Test with lower threshold</strong>: Run the function with a lower confidence threshold (e.g., <code>?confidenceThreshold=0.6</code>)</li><li><strong>Check data consistency</strong>: Ensure time and location data is correctly formatted in raw_data records</li><li><strong>Examine match criteria</strong>: Check the logs for &quot;Match case&quot; info messages to see which match criteria are being evaluated</li></ol><h3 id="incorrect-matches" tabindex="-1">Incorrect Matches <a class="header-anchor" href="#incorrect-matches" aria-label="Permalink to &quot;Incorrect Matches&quot;">​</a></h3><p>If the system is incorrectly matching records that aren&#39;t related:</p><ol><li><strong>Increase confidence threshold</strong>: Raise the threshold to require more evidence (e.g., <code>?confidenceThreshold=0.8</code>)</li><li><strong>Examine similarity components</strong>: Review the logs to see which factors are driving the high similarity score</li><li><strong>Adjust weights</strong>: Consider updating the weight distribution in <code>calculateSimilarityScore</code></li></ol><h3 id="records-being-re-merged-incorrectly" tabindex="-1">Records Being Re-merged Incorrectly <a class="header-anchor" href="#records-being-re-merged-incorrectly" aria-label="Permalink to &quot;Records Being Re-merged Incorrectly&quot;">​</a></h3><p>If records that were already merged are being incorrectly re-merged with different records:</p><ol><li><strong>Check merge chains</strong>: Verify that the system is properly tracking merge relationships with the logs showing &quot;Following merge chain&quot; messages</li><li><strong>Validate merge status fields</strong>: Ensure records have the correct <code>merge_status</code> and <code>merged_into</code> fields set</li><li><strong>Look for timing issues</strong>: Check if the incident processing is happening before deduplication has completed</li></ol><h3 id="incident-links-being-lost" tabindex="-1">Incident Links Being Lost <a class="header-anchor" href="#incident-links-being-lost" aria-label="Permalink to &quot;Incident Links Being Lost&quot;">​</a></h3><p>If incident links are not being preserved during merges:</p><ol><li><strong>Check the logs</strong>: Look for messages like &quot;Preserved incident link from primary record&quot; or &quot;Transferred incident link from secondary record&quot;</li><li><strong>Verify incident link fields</strong>: Ensure the <code>linked_incident</code> and <code>has_incident</code> fields are being properly maintained</li><li><strong>Check for incidents linked to different incidents</strong>: Look for warning logs showing &quot;Records linked to DIFFERENT incidents&quot;</li></ol><h3 id="process-raw-data-not-running-after-deduplication" tabindex="-1">Process-raw-data Not Running After Deduplication <a class="header-anchor" href="#process-raw-data-not-running-after-deduplication" aria-label="Permalink to &quot;Process-raw-data Not Running After Deduplication&quot;">​</a></h3><p>If the incident processing isn&#39;t being triggered after deduplication:</p><ol><li><strong>Check PUBLIC_URL</strong>: Ensure the <code>PUBLIC_URL</code> environment variable is set correctly in Netlify</li><li><strong>Review error logs</strong>: Look for errors related to triggering the process function</li><li><strong>Test the process function</strong>: Try manually triggering the process function to ensure it works</li><li><strong>Verify network access</strong>: Ensure the function has network access to make the POST request</li></ol><h3 id="missing-required-fields" tabindex="-1">Missing Required Fields <a class="header-anchor" href="#missing-required-fields" aria-label="Permalink to &quot;Missing Required Fields&quot;">​</a></h3><p>If deduplication fails due to missing fields:</p><ol><li><strong>Check for required fields</strong>: Ensure raw_data records have date, latitude, and longitude fields</li><li><strong>Validate coordinates</strong>: Make sure latitude and longitude values are valid numbers</li><li><strong>Add data validation</strong>: Consider enhancing the system to better validate and normalize input data</li></ol><h2 id="interpreting-logs" tabindex="-1">Interpreting Logs <a class="header-anchor" href="#interpreting-logs" aria-label="Permalink to &quot;Interpreting Logs&quot;">​</a></h2><p>The deduplication system produces detailed logs for troubleshooting. Here&#39;s how to interpret key log entries:</p><h3 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>INFO {&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;Configuration&quot;,&quot;dryRun&quot;:false,&quot;confidenceThreshold&quot;:0.7,&quot;maxRecords&quot;:100}</span></span></code></pre></div><p>Confirms the runtime configuration, including:</p><ul><li><code>dryRun</code>: Whether changes are being applied or just simulated</li><li><code>confidenceThreshold</code>: The similarity score required for merging</li><li><code>maxRecords</code>: Maximum number of records processed</li></ul><h3 id="record-fetching" tabindex="-1">Record Fetching <a class="header-anchor" href="#record-fetching" aria-label="Permalink to &quot;Record Fetching&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>INFO {&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;Retrieved 30 records for processing&quot;}</span></span>
<span class="line"><span>INFO {&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;Found 4 different sources&quot;,&quot;sources&quot;:[&quot;ICC&quot;,&quot;RECAAP&quot;,&quot;MDAT&quot;,&quot;UKMTO&quot;]}</span></span></code></pre></div><p>Shows the number of records retrieved and the distribution across sources.</p><h3 id="similarity-scoring" tabindex="-1">Similarity Scoring <a class="header-anchor" href="#similarity-scoring" aria-label="Permalink to &quot;Similarity Scoring&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>INFO {&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;Similarity score components&quot;,&quot;recordIds&quot;:[&quot;recA&quot;,&quot;recB&quot;],&quot;timeScore&quot;:0.95,&quot;spatialScore&quot;:0.98,&quot;vesselNameScore&quot;:0,&quot;vesselIMOScore&quot;:0,&quot;incidentTypeScore&quot;:0.8}</span></span></code></pre></div><p>Provides detailed breakdown of similarity calculation between two records:</p><ul><li><code>timeScore</code>: Time proximity (higher = closer in time)</li><li><code>spatialScore</code>: Spatial proximity (higher = closer in location)</li><li><code>vesselNameScore</code>: Vessel name similarity</li><li><code>vesselIMOScore</code>: IMO number match (0 or 1)</li><li><code>incidentTypeScore</code>: Incident type similarity</li></ul><h3 id="match-results" tabindex="-1">Match Results <a class="header-anchor" href="#match-results" aria-label="Permalink to &quot;Match Results&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>INFO {&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;Found 12 potential matches&quot;,&quot;highConfidence&quot;:3,&quot;mediumConfidence&quot;:9,&quot;analyzedPairs&quot;:120}</span></span></code></pre></div><p>Summarizes the match analysis:</p><ul><li><code>highConfidence</code>: Matches above the high confidence threshold (≥0.8)</li><li><code>mediumConfidence</code>: Matches in the medium confidence range (0.6-0.8)</li><li><code>analyzedPairs</code>: Total number of record pairs compared</li></ul><h3 id="primary-record-determination" tabindex="-1">Primary Record Determination <a class="header-anchor" href="#primary-record-determination" aria-label="Permalink to &quot;Primary Record Determination&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>INFO {&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;Primary record determination&quot;,&quot;record1&quot;:{...},&quot;record2&quot;:{...}}</span></span></code></pre></div><p>Shows the scoring used to determine which record becomes primary in a merge operation.</p><h3 id="processing-results" tabindex="-1">Processing Results <a class="header-anchor" href="#processing-results" aria-label="Permalink to &quot;Processing Results&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>INFO {&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;Successfully merged records&quot;,&quot;primaryId&quot;:&quot;recA&quot;,&quot;secondaryId&quot;:&quot;recB&quot;}</span></span>
<span class="line"><span>INFO {&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;Cross-Source Deduplication complete&quot;,&quot;recordsAnalyzed&quot;:30,&quot;mergesPerformed&quot;:3}</span></span></code></pre></div><p>Confirms successful merges and provides a summary of the processing run.</p><h2 id="testing-the-deduplication-system" tabindex="-1">Testing the Deduplication System <a class="header-anchor" href="#testing-the-deduplication-system" aria-label="Permalink to &quot;Testing the Deduplication System&quot;">​</a></h2><h3 id="using-dry-run-mode" tabindex="-1">Using Dry Run Mode <a class="header-anchor" href="#using-dry-run-mode" aria-label="Permalink to &quot;Using Dry Run Mode&quot;">​</a></h3><p>To test the system without making changes:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>curl -X POST &quot;https://your-netlify-site.netlify.app/.netlify/functions/deduplicate-cross-source-background?dryRun=true&quot;</span></span></code></pre></div><p>This will identify potential matches but won&#39;t update any records, allowing you to review the results before making changes.</p><h3 id="testing-with-sample-data" tabindex="-1">Testing with Sample Data <a class="header-anchor" href="#testing-with-sample-data" aria-label="Permalink to &quot;Testing with Sample Data&quot;">​</a></h3><ol><li><p>Create test records in Airtable with controlled variations:</p><ul><li>Same incident reported by different sources</li><li>Similar incidents with different vessels</li><li>Unrelated incidents with geographical proximity</li></ul></li><li><p>Run the deduplication with these test cases and review the logs to see how the system interprets them.</p></li></ol><h3 id="testing-different-thresholds" tabindex="-1">Testing Different Thresholds <a class="header-anchor" href="#testing-different-thresholds" aria-label="Permalink to &quot;Testing Different Thresholds&quot;">​</a></h3><p>Test the sensitivity of the system by varying the confidence threshold:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>curl -X POST &quot;https://your-netlify-site.netlify.app/.netlify/functions/deduplicate-cross-source-background?confidenceThreshold=0.65&quot;</span></span></code></pre></div><p>Try different thresholds (0.6, 0.7, 0.8) and analyze how the match results change.</p><h2 id="monitoring-and-maintenance" tabindex="-1">Monitoring and Maintenance <a class="header-anchor" href="#monitoring-and-maintenance" aria-label="Permalink to &quot;Monitoring and Maintenance&quot;">​</a></h2><h3 id="regular-log-review" tabindex="-1">Regular Log Review <a class="header-anchor" href="#regular-log-review" aria-label="Permalink to &quot;Regular Log Review&quot;">​</a></h3><ul><li>Check logs after each deduplication run to monitor performance</li><li>Look for patterns in matching/non-matching records</li><li>Track the number of merges performed over time</li></ul><h3 id="system-tuning" tabindex="-1">System Tuning <a class="header-anchor" href="#system-tuning" aria-label="Permalink to &quot;System Tuning&quot;">​</a></h3><p>Based on observed performance:</p><ol><li>Adjust confidence thresholds if needed</li><li>Update similarity calculation weights</li><li>Modify source priorities based on data quality</li></ol><h3 id="data-quality-improvements" tabindex="-1">Data Quality Improvements <a class="header-anchor" href="#data-quality-improvements" aria-label="Permalink to &quot;Data Quality Improvements&quot;">​</a></h3><ul><li>Address any systematic data issues identified during deduplication</li><li>Standardize date/time formats across sources</li><li>Implement coordinate normalization if needed</li><li>Work with data providers to improve data consistency</li></ul></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/mara/deduplication/implementation.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>Implementation</span><!--]--></a></div><div class="pager" data-v-1bcd8184><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>Released under the Internal License.</p><p class="copyright" data-v-566314d4>Copyright © 2023-present Atlas Bear</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"ai-integration_index.md\":\"BWIGsJbD\",\"ai-integration_prompts-system.md\":\"vAOKjWg4\",\"api_authentication.md\":\"CGk9SOU3\",\"api_endpoints_incidents.md\":\"CkibLASL\",\"api_error-codes.md\":\"DsNPeTXt\",\"api_index.md\":\"sAuSpiKG\",\"api_rate-limits.md\":\"B4wBgKsp\",\"components_index.md\":\"z6P4EwWW\",\"components_maritime-map.md\":\"DsDdmsAy\",\"components_pdf-download-button.md\":\"CcC59VUh\",\"components_static-map.md\":\"CDnaQayq\",\"data-pipeline_data-collection.md\":\"CbZdQQLF\",\"data-pipeline_data-processing.md\":\"CAqa2APE\",\"data-pipeline_index.md\":\"BOniQ1fr\",\"data-pipeline_troubleshooting.md\":\"CtiwH0un\",\"deduplication_implementation.md\":\"BAAmcQsL\",\"deduplication_index.md\":\"C7zfcAZp\",\"deduplication_troubleshooting.md\":\"PtRIcf3o\",\"flash-report_api-reference.md\":\"DX7nNuEi\",\"flash-report_architecture.md\":\"D9pKX3Bx\",\"flash-report_automation-system.md\":\"BLSa-nBa\",\"flash-report_cache-implementation.md\":\"tfbQ2NDL\",\"flash-report_index.md\":\"C6kP9rww\",\"flash-report_integration-guide.md\":\"GYTWCc7u\",\"flash-report_overview.md\":\"CN0N7mJh\",\"flash-report_testing-guide.md\":\"CBB-LXAO\",\"guide_architecture.md\":\"B80Pkxob\",\"guide_deployment.md\":\"DaPtdKUc\",\"guide_getting-started.md\":\"D-L5WWZw\",\"guide_index.md\":\"DvzUFPSs\",\"guide_installation.md\":\"Cntmt2Id\",\"index.md\":\"bvp_W4hb\",\"migration-plan.md\":\"BhyYEMxd\",\"readme.md\":\"CDH59HGp\",\"weekly-report_api-reference.md\":\"BTIZ2Xio\",\"weekly-report_data-flow.md\":\"B5S51BWm\",\"weekly-report_date-handling.md\":\"CRq9457T\",\"weekly-report_email-notifications.md\":\"D3hw4C-v\",\"weekly-report_implementation.md\":\"DOWV4f3h\",\"weekly-report_index.md\":\"Ir_PtMFG\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"MARA Documentation\",\"description\":\"Documentation for the Maritime Risk Analysis system\",\"base\":\"/mara/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"https://drive.google.com/uc?id=1OB5Lwgpp03DB9vs50T_kkKzL5VV_y5Eo\",\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Guide\",\"link\":\"/guide/\"},{\"text\":\"Components\",\"link\":\"/components/\"},{\"text\":\"Data Pipeline\",\"link\":\"/data-pipeline/\"},{\"text\":\"Deduplication\",\"link\":\"/deduplication/\"},{\"text\":\"AI Integration\",\"link\":\"/ai-integration/\"},{\"text\":\"Flash Reports\",\"link\":\"/flash-report/\"},{\"text\":\"Weekly Reports\",\"link\":\"/weekly-report/\"},{\"text\":\"API\",\"link\":\"/api/\"}],\"sidebar\":{\"/guide/\":[{\"text\":\"Introduction\",\"items\":[{\"text\":\"Getting Started\",\"link\":\"/guide/getting-started\"},{\"text\":\"Architecture\",\"link\":\"/guide/architecture\"},{\"text\":\"Installation\",\"link\":\"/guide/installation\"},{\"text\":\"Deployment\",\"link\":\"/guide/deployment\"}]}],\"/components/\":[{\"text\":\"UI Components\",\"items\":[{\"text\":\"Overview\",\"link\":\"/components/\"},{\"text\":\"PDF Download Button\",\"link\":\"/components/pdf-download-button\"},{\"text\":\"Maritime Map\",\"link\":\"/components/maritime-map\"}]}],\"/data-pipeline/\":[{\"text\":\"Data Pipeline\",\"items\":[{\"text\":\"Overview\",\"link\":\"/data-pipeline/\"},{\"text\":\"Data Collection\",\"link\":\"/data-pipeline/data-collection\"},{\"text\":\"Data Processing\",\"link\":\"/data-pipeline/data-processing\"},{\"text\":\"Troubleshooting\",\"link\":\"/data-pipeline/troubleshooting\"}]}],\"/deduplication/\":[{\"text\":\"Cross-Source Deduplication\",\"items\":[{\"text\":\"Overview\",\"link\":\"/deduplication/\"},{\"text\":\"Implementation\",\"link\":\"/deduplication/implementation\"},{\"text\":\"Troubleshooting\",\"link\":\"/deduplication/troubleshooting\"}]}],\"/flash-report/\":[{\"text\":\"Flash Reports\",\"items\":[{\"text\":\"Overview\",\"link\":\"/flash-report/\"},{\"text\":\"API Reference\",\"link\":\"/flash-report/api-reference\"},{\"text\":\"Architecture\",\"link\":\"/flash-report/architecture\"},{\"text\":\"Automation\",\"link\":\"/flash-report/automation-system\"},{\"text\":\"Cache Implementation\",\"link\":\"/flash-report/cache-implementation\"},{\"text\":\"Integration Guide\",\"link\":\"/flash-report/integration-guide\"},{\"text\":\"Testing Guide\",\"link\":\"/flash-report/testing-guide\"}]}],\"/weekly-report/\":[{\"text\":\"Weekly Reports\",\"items\":[{\"text\":\"Overview\",\"link\":\"/weekly-report/\"},{\"text\":\"Implementation\",\"link\":\"/weekly-report/implementation\"},{\"text\":\"Date Handling\",\"link\":\"/weekly-report/date-handling\"},{\"text\":\"Data Flow\",\"link\":\"/weekly-report/data-flow\"},{\"text\":\"API Reference\",\"link\":\"/weekly-report/api-reference\"},{\"text\":\"Email Notifications\",\"link\":\"/weekly-report/email-notifications\"}]}],\"/ai-integration/\":[{\"text\":\"AI Integration\",\"items\":[{\"text\":\"Overview\",\"link\":\"/ai-integration/\"},{\"text\":\"Prompts System\",\"link\":\"/ai-integration/prompts-system\"}]}],\"/api/\":[{\"text\":\"API Reference\",\"items\":[{\"text\":\"Overview\",\"link\":\"/api/\"},{\"text\":\"Authentication\",\"link\":\"/api/authentication\"},{\"text\":\"Rate Limits\",\"link\":\"/api/rate-limits\"},{\"text\":\"Error Codes\",\"link\":\"/api/error-codes\"},{\"text\":\"Endpoints\",\"collapsed\":false,\"items\":[{\"text\":\"Incidents\",\"link\":\"/api/endpoints/incidents\"},{\"text\":\"Reports\",\"link\":\"/api/endpoints/reports\"},{\"text\":\"Hotspots\",\"link\":\"/api/endpoints/hotspots\"},{\"text\":\"Countries\",\"link\":\"/api/endpoints/countries\"},{\"text\":\"Ports\",\"link\":\"/api/endpoints/ports\"}]}]}]},\"footer\":{\"message\":\"Released under the Internal License.\",\"copyright\":\"Copyright © 2023-present Atlas Bear\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/atlas-bear/mara\"}],\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>